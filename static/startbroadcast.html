<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Rtc sixsteps</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link href="css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/style.css" rel="stylesheet" />

             


<style>
            audio, video {
                -moz-transition: all 1s ease;
                -ms-transition: all 1s ease;
                
                -o-transition: all 1s ease;
                -webkit-transition: all 1s ease;
                transition: all 1s ease;
                vertical-align: top;
                width: 100%;
            }

            input {
                border: 1px solid #d9d9d9;
                border-radius: 1px;
                font-size: 2em;
                margin: .2em;
                width: 30%;
            }

            .setup {
	border-bottom-left-radius: 0;
	border-top-left-radius: 0;
	font-size: 102%;
	height: 47px;
	margin-left: -9px;
	margin-top: 8px;
	position: absolute;
	top: 235px;
	left: 237px;
            }

            p { padding: 1em; }

            li {
                border-bottom: 1px solid rgb(189, 189, 189);
                border-left: 1px solid rgb(189, 189, 189);
                padding: .5em;
            }
             </style>
        
         <script>
            document.createElement('article');
            document.createElement('footer');
        </script>
        
        <!-- scripts used for broadcasting -->
        
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
       
        
 
        
        
        
	</head>
	<body>
   
    
    <!--[if IE]>

<div style="width: 100%; border: 1px solid #F7941D; background: #FEEFDA; text-align: center;&quot;&gt; clear: both; height: 75px; position: relative;">

<div style="width: 100%; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;">

<div style="width: 10%; float: left;"><img alt="Warning!" src="img/ie6nomore-warning.jpg" /></div>

<div style="width: 90%; float: left; font-family : Arial, sans-serif; ">

<div style="font-size: 14px; font-weight: bold; margin-top: 12px;">You are using an obsolete and unsupported browser. For better user experience please switch to <a href="http://www.google.com/chrome">Chrome</a>, <a href="http://getfirefox.com">FireFox</a>.

Thanks!</div>

</div>

</div>

</div>

<![endif]-->


    	<div class="navbar  navbar-inverse navbar-static-top">
        	<div class="container">
            	<div class=""><a href="index.html"><!--<img src="img/private21.png" />--><h2>CCTV LIVE</h2></a></div>
            </div>
        </div>
        
        <div class="container">
        	<div class="jumbotron">
            	<center><h2>Private & Free security broadcast solution</h2><br /><br />
                <div class="panel">
                
                
                	<section class="experiment">  <br  />              
                 <section>
                 
                   <span>
                    
                       <font style="font-size:18px" color="#0099FF"><b>Start Broadcasting!!</b></font>&nbsp;&nbsp;
                       <img src="img/Arrows-Right-round-icon.png" height="30px" width="30px" align="top" /> 
                       
                   </span>
                    <div class="input-group col-lg-4">
                	<input type="text" id="broadcast-name" class="form-control" placeholder="Room name" />
                    <span class="input-group-btn">
                    	<button id="broadcast-all-cameras" class="btn btn-primary" disabled>Broadcast</button>
                    </span>
                    <!--<span style="padding-left:30px" class="input-group-btn">
                    	<a style="visibility:hidden" id="share" class="btn btn-primary" href="#sharewith" data-toggle="modal">Share</a>
                       
                    </span>-->
                    
                    <br />
                </div> 
                <div id="buttons-container"><span><b><font size="+1">Available devices :</font></span> </div><br />
                    
                </section>
                
                <!-- list of all available broadcasting rooms -->
                <table style="width: 100%;" id="rooms-list"></table>
                
                <!-- local/remote videos container -->
                <div id="videos-container"></div>
            </section>
            <script src="//cdn.webrtc-experiment.com/RTCMultiConnection-v2.2.1.js"> </script>
<script>
var connection = new RTCMultiConnection();

// connection.getExternalIceServers = false; // optional--remove it.
// connection.iceServers.length = 1;         // optional--remove it.

connection.dontCaptureUserMedia = true;

// Parent <div> for videos
connection.body = document.getElementById('videos-container');

connection.session = {
    audio: true,
    video: true
	
};

connection.direction = 'one-way';

connection.sdpConstraints.mandatory = {
    OfferToReceiveAudio: true,
    OfferToReceiveVideo: true
};

var buttonsContainer = document.getElementById('buttons-container');
// DetectRTC.load --- to make sure all devices are captured
// connection.enumerateDevices --- to get list of all captured devices
connection.DetectRTC.load(function() {
    connection.enumerateDevices(function(devices) {
        // iterate over devices-array
        devices.forEach(function(device) {
            // skip audio devices
            if (device.kind.indexOf('audio') != -1) return;
			 for (var i = 0; i < device.length; i++) {
             device[i].label = "Cam_" + i;
			 }
            var button = document.createElement('button');
            button.id = device.deviceId;
           // button.innerHTML = device.label || device.deviceId;
			 button.innerHTML = device.label || "Cam_" + i;
            button.onclick = function() {
                this.disabled = true;

                connection.selectDevices(this.id);
                connection.dontCaptureUserMedia = false;
				
                connection.captureUserMedia(function(stream) {
                connection.attachStreams.push(stream);
				connection.dontCaptureUserMedia = true;
                    
                    if(document.getElementById('broadcast-all-cameras').disabled == true) {
                        document.getElementById('broadcast-all-cameras').disabled = false;
                        document.getElementById('broadcast-all-cameras').style.background = '-webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0.05, rgb(143, 231, 253)), to(rgb(255, 255, 255)))';
                    }
                });
            };
            buttonsContainer.appendChild(button);
        });
    });
});
				var sessions = { };
                connection.onNewSession = function(session) {
                    if (sessions[session.sessionid]) return;
                    sessions[session.sessionid] = session;

                    var tr = document.createElement('tr');
                    tr.innerHTML = '<td><strong>' + session.sessionid + '</strong> is sharing his webcam in one-way direction!</td>' +
                        '<td><button class="join">View His Webcam</button></td>';
						if(tr != null)
							{
							document.getElementById('broadcast-all-cameras').disabled = true;
						    document.getElementById('broadcast-name').disabled = true;
							document.getElementById('buttons-container').innerHTML = ' ';
							
							
							}
						
						
						 roomsList.insertBefore(tr, roomsList.firstChild);
						
							

                    var joinRoomButton = tr.querySelector('.join');
                    joinRoomButton.setAttribute('data-sessionid', session.sessionid);
                    joinRoomButton.onclick = function() {
                        this.disabled = true;

                        var sessionid = this.getAttribute('data-sessionid');
                        session = sessions[sessionid];

                        if (!session) throw 'No such session exists.';

                        connection.join(session);
                    };
                };
				var roomsList = document.getElementById('rooms-list');
// signaling implementation
// https://github.com/muaz-khan/WebRTC-Experiment/tree/master/websocket-over-nodejs
var SIGNALING_SERVER = 'wss://wsnodejs.nodejitsu.com:443';
connection.openSignalingChannel = function(config) {
    config.channel = config.channel || this.channel;
    var websocket = new WebSocket(SIGNALING_SERVER);
    websocket.channel = config.channel;
    websocket.onopen = function() {
        websocket.push(JSON.stringify({
            open: true,
            channel: config.channel
        }));
        if (config.callback)
            config.callback(websocket);
    };
    websocket.onmessage = function(event) {
        config.onmessage(JSON.parse(event.data));
    };
    websocket.push = websocket.send;
    websocket.send = function(data) {
        websocket.push(JSON.stringify({
            data: data,
            channel: config.channel
        }));
    };
};

connection.connect();

document.getElementById('broadcast-all-cameras').onclick = function() {
    this.disabled = true;
    this.style.background = 'rgba(216, 205, 205, 0.2)';
    
    connection.open(document.getElementById('broadcast-name').value || 'Anonymous');
};
</script>
                
                
                </div>
                 <h3 style="font-size:24px">Watch live video streams from anywhere on any device.</h3>
                  <h4 style="color:#666"><font color="#FF0000">**</font>[ Please open this site in 'Google Chrome' and 'Firefox' only. ]</h4>
                
               
                
                
            </div>
        </div>
    
    <br /><br />
    	<div class="navbar navbar-inverse">
        	<div class="container">
        		<div class="row">
                <div class="col-md-2">
	            		<img class="featuredImg" src="img/f.png" width="100%" />
                    </div>
                	<div class="col-md-3">
	            		<img class="featuredImg" src="img/f11.png" width="100%" />
                    </div>
                    <div class="col-md-3">    
                		<img class="featuredImg" src="img/f21.png" width="100%" />
                    </div>
                    <div class="col-md-3">
	                	<img class="featuredImg" src="img/f31.png" width="100%" />
                    </div>
                    <div class="col-md-11">
	            		<img style="float:right" class="featuredImg" src="img/f4.png" width="20%" />
                    </div>
                </div>
                
          	</div>
            <div class="navbar-default navbar-fixed-bottom">
        		<div class="container">
            		<center>
                    <span style="padding: 10px"><a href="about.html"><font color="#666666"><b>Help</font></a></span>|
                     <span style="padding: 10px"><a href="contact.html"><font color="#666666">Contact Us!</font></a></span>|
                     <span style="padding: 10px"><a href="disclaimer.html"><font color="#666666">Disclaimer</font></a></span>
                    </center>
                    <center><font style="font-size:11px">
                    Copyright © 2014 CCTV LIVE, Inc. All rights reserved.</font>
                    </center>
            	</div>
           	</div>
        </div>
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    	<script src="js/bootstrap.js"></script>
      <style>



blockquote {
    font-size: 20px;
    color: rgb(172, 10, 10);
    border: 1px solid rgb(172, 10, 10);
    padding: 5px 10px;
    border-radius: 5px;
    margin: 9px 10px;
}
.commented-container{
				}
</style>   

	</body>
</html>
